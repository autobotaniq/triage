!function(n,e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(n,t)}):"object"==typeof exports?e(n,require("jquery")):e(n,n.jQuery||n.Zepto)}(this,function(t,s){"use strict";var n,r,d,c="remodal",i=t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.NAMESPACE||c,l=s.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(t){return t+"."+i}).join(" "),p=s.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(t){return t+"."+i}).join(" "),o=s.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.DEFAULTS),m={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},u="confirmation",f="cancellation",g=void 0!==(n=document.createElement("div").style).animationName||void 0!==n.WebkitAnimationName||void 0!==n.MozAnimationName||void 0!==n.msAnimationName||void 0!==n.OAnimationName,h=/iPad|iPhone|iPod/.test(navigator.platform);function v(t){if(g&&"none"===t.css("animation-name")&&"none"===t.css("-webkit-animation-name")&&"none"===t.css("-moz-animation-name")&&"none"===t.css("-o-animation-name")&&"none"===t.css("-ms-animation-name"))return 0;for(var n,e=t.css("animation-duration")||t.css("-webkit-animation-duration")||t.css("-moz-animation-duration")||t.css("-o-animation-duration")||t.css("-ms-animation-duration")||"0s",a=t.css("animation-delay")||t.css("-webkit-animation-delay")||t.css("-moz-animation-delay")||t.css("-o-animation-delay")||t.css("-ms-animation-delay")||"0s",i=t.css("animation-iteration-count")||t.css("-webkit-animation-iteration-count")||t.css("-moz-animation-iteration-count")||t.css("-o-animation-iteration-count")||t.css("-ms-animation-iteration-count")||"1",e=e.split(", "),a=a.split(", "),i=i.split(", "),o=0,s=e.length,r=Number.NEGATIVE_INFINITY;o<s;o++)r<(n=parseFloat(e[o])*parseInt(i[o],10)+parseFloat(a[o]))&&(r=n);return r}function $(){if(s(document).height()<=s(window).height())return 0;var t,n,e=document.createElement("div"),a=document.createElement("div");return e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e),t=e.offsetWidth,e.style.overflow="scroll",a.style.width="100%",e.appendChild(a),n=a.offsetWidth,e.parentNode.removeChild(e),t-n}function a(){var t,n,e,a;h||(t=s("html"),n=E("is-locked"),t.hasClass(n)&&(a=s(document.body),e=parseInt(a.css("padding-right"),10)-$(),a.css("padding-right",e+"px"),t.removeClass(n)))}function C(t,n,e,a){var i=E("is",n),o=[E("is",m.CLOSING),E("is",m.OPENING),E("is",m.CLOSED),E("is",m.OPENED)].join(" ");t.$bg.removeClass(o).addClass(i),t.$overlay.removeClass(o).addClass(i),t.$wrapper.removeClass(o).addClass(i),t.$modal.removeClass(o).addClass(i),t.state=n,e||t.$modal.trigger({type:n,reason:a},[{reason:a}])}function y(t,n,e){function a(t){t.target===this&&o++}function i(t){t.target===this&&0==--o&&(s.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].off(l+" "+p)}),n())}var o=0;s.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].on(l,a).on(p,i)}),t(),0===v(e.$bg)&&0===v(e.$overlay)&&0===v(e.$wrapper)&&0===v(e.$modal)&&(s.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].off(l+" "+p)}),n())}function O(e){e.state!==m.CLOSED&&(s.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].off(l+" "+p)}),e.$bg.removeClass(e.settings.modifier),e.$overlay.removeClass(e.settings.modifier).hide(),e.$wrapper.hide(),a(),C(e,m.CLOSED,!0))}function E(){for(var t=i,n=0;n<arguments.length;++n)t+="-"+arguments[n];return t}function e(){var t,n,e=location.hash.replace("#","");if(e){try{n=s("[data-"+c+'-id="'+e+'"]')}catch(t){}n&&n.length&&(t=s[c].lookup[n.data(c)])&&t.settings.hashTracking&&t.open()}else r&&r.state===m.OPENED&&r.settings.hashTracking&&r.close()}function w(t,n){var e=s(document.body),a=this;a.settings=s.extend({},o,n),a.index=s[c].lookup.push(a)-1,a.state=m.CLOSED,a.$overlay=s("."+E("overlay")),null!==a.settings.appendTo&&a.settings.appendTo.length&&(e=s(a.settings.appendTo)),a.$overlay.length||(a.$overlay=s("<div>").addClass(E("overlay")+" "+E("is",m.CLOSED)).hide(),e.append(a.$overlay)),a.$bg=s("."+E("bg")).addClass(E("is",m.CLOSED)),a.$modal=t.addClass(i+" "+E("is-initialized")+" "+a.settings.modifier+" "+E("is",m.CLOSED)).attr("tabindex","-1"),a.$wrapper=s("<div>").addClass(E("wrapper")+" "+a.settings.modifier+" "+E("is",m.CLOSED)).hide().append(a.$modal),e.append(a.$wrapper),a.$wrapper.on("click."+i,"[data-"+c+'-action="close"]',function(t){t.preventDefault(),a.close()}),a.$wrapper.on("click."+i,"[data-"+c+'-action="cancel"]',function(t){t.preventDefault(),a.$modal.trigger(f),a.settings.closeOnCancel&&a.close(f)}),a.$wrapper.on("click."+i,"[data-"+c+'-action="confirm"]',function(t){t.preventDefault(),a.$modal.trigger(u),a.settings.closeOnConfirm&&a.close(u)}),a.$wrapper.on("click."+i,function(t){s(t.target).hasClass(E("wrapper"))&&a.settings.closeOnOutsideClick&&a.close()})}w.prototype.open=function(){var t,n,e,a,i,o=this;o.state!==m.OPENING&&o.state!==m.CLOSING&&((i=o.$modal.attr("data-"+c+"-id"))&&o.settings.hashTracking&&(d=s(window).scrollTop(),location.hash=i),r&&r!==o&&O(r),r=o,h||(t=s("html"),n=E("is-locked"),t.hasClass(n)||(a=s(document.body),e=parseInt(a.css("padding-right"),10)+$(),a.css("padding-right",e+"px"),t.addClass(n))),o.$bg.addClass(o.settings.modifier),o.$overlay.addClass(o.settings.modifier).show(),o.$wrapper.show().scrollTop(0),o.$modal.focus(),y(function(){C(o,m.OPENING)},function(){C(o,m.OPENED)},o))},w.prototype.close=function(t){var n=this;n.state!==m.OPENING&&n.state!==m.CLOSING&&n.state!==m.CLOSED&&(n.settings.hashTracking&&n.$modal.attr("data-"+c+"-id")===location.hash.substr(1)&&(location.hash="",s(window).scrollTop(d)),y(function(){C(n,m.CLOSING,!1,t)},function(){n.$bg.removeClass(n.settings.modifier),n.$overlay.removeClass(n.settings.modifier).hide(),n.$wrapper.hide(),a(),C(n,m.CLOSED,!1,t)},n))},w.prototype.getState=function(){return this.state},w.prototype.destroy=function(){var t=s[c].lookup;O(this),this.$wrapper.remove(),delete t[this.index],0===s.grep(t,function(t){return!!t}).length&&(this.$overlay.remove(),this.$bg.removeClass(E("is",m.CLOSING)+" "+E("is",m.OPENING)+" "+E("is",m.CLOSED)+" "+E("is",m.OPENED)))},s[c]={lookup:[]},s.fn[c]=function(e){var a,i;return this.each(function(t,n){null==(i=s(n)).data(c)?(a=new w(i,e),i.data(c,a.index),a.settings.hashTracking&&i.attr("data-"+c+"-id")===location.hash.substr(1)&&a.open()):a=s[c].lookup[i.data(c)]}),a},s(document).ready(function(){s(document).on("click","[data-"+c+"-target]",function(t){t.preventDefault();var n=t.currentTarget.getAttribute("data-"+c+"-target"),e=s("[data-"+c+'-id="'+n+'"]');s[c].lookup[e.data(c)].open()}),s(document).find("."+i).each(function(t,n){var e=s(n),a=e.data(c+"-options");a?("string"==typeof a||a instanceof String)&&(a=function(t){for(var n,e,a={},i=0,o=(n=(t=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",")).split(",")).length;i<o;i++)n[i]=n[i].split(":"),("string"==typeof(e=n[i][1])||e instanceof String)&&(e="true"===e||"false"!==e&&e),("string"==typeof e||e instanceof String)&&(e=isNaN(e)?e:+e),a[n[i][0]]=e;return a}(a)):a={},e[c](a)}),s(document).on("keydown."+i,function(t){r&&r.settings.closeOnEscape&&r.state===m.OPENED&&27===t.keyCode&&r.close()}),s(window).on("hashchange."+i,e)})});